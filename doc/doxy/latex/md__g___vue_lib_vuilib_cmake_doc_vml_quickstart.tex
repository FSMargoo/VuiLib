  \doxysection*{Vui\+Lib\mbox{[}VML\mbox{]} 快速上手：使用 VML 快速构建软件布局}

 

\begin{quote}
该部分将会通过 Vui\+Lib 中的 VML 快速构建一个软件的布局

本教程的完整 VML 源码可以在 doc/code/vml-\/start 找到 \end{quote}
\hypertarget{md__g___vue_lib_vuilib_cmake_doc_vml_quickstart_autotoc_md0}{}\doxysubsection{第一步：认识 VML}\label{md__g___vue_lib_vuilib_cmake_doc_vml_quickstart_autotoc_md0}
VML 是基于 XML 改造而来的语言，可以让你快速的构造软件的布局，一个基础的 VML 节点如下定义： 
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{comment}{<!-\/-\/}}
\DoxyCodeLine{\textcolor{comment}{    type   : 控件类型 例如: pushbutton}}
\DoxyCodeLine{\textcolor{comment}{    x, y, }}
\DoxyCodeLine{\textcolor{comment}{    width, }}
\DoxyCodeLine{\textcolor{comment}{    height : 控件几何信息 （必须为数字或富属性内容）}}
\DoxyCodeLine{\textcolor{comment}{-\/-\/>}}
\DoxyCodeLine{<\textcolor{keywordtype}{tag} \textcolor{keyword}{type}=\textcolor{stringliteral}{"{}control-\/type"{}} \textcolor{keyword}{x}=\textcolor{stringliteral}{"{}x"{}} \textcolor{keyword}{y}=\textcolor{stringliteral}{"{}y"{}} \textcolor{keyword}{width}=\textcolor{stringliteral}{"{}width"{}} \textcolor{keyword}{height}=\textcolor{stringliteral}{"{}height"{}}>}
\DoxyCodeLine{</\textcolor{keywordtype}{tag}>}

\end{DoxyCode}
 type、x、y、width、height 这五个属性是构成一个控件的五要素，这五个属性中最重要的是 type 属性，指定控件的类型。

而对于 VML 的显示，可以在 C++ 层使用 \mbox{\hyperlink{class_v_m_l_1_1_v_m_l_widget}{VML\+::\+VMLWidget}} 来调用显示，如下所示： 
\begin{DoxyCode}{0}
\DoxyCodeLine{ \{C++\}}
\DoxyCodeLine{\#include "{}./include/core/render/vpainter.h"{}}
\DoxyCodeLine{\#include "{}./include/core/widget/vwidget.h"{}}
\DoxyCodeLine{}
\DoxyCodeLine{\#include "{}./include/vml/vmlwidget.h"{}}
\DoxyCodeLine{}
\DoxyCodeLine{int main() \{}
\DoxyCodeLine{    using namespace Core;}
\DoxyCodeLine{    using namespace VML;}
\DoxyCodeLine{    using namespace VSS;}
\DoxyCodeLine{}
\DoxyCodeLine{    VApplication Application;}
\DoxyCodeLine{}
\DoxyCodeLine{    VMLWidget VMLWidget(0, 0, \&Application, true);}
\DoxyCodeLine{    auto      Result = VMLWidget.LoadVML(L"{}./testvml.xml"{}, VMLParserParseMode::FromFile);}
\DoxyCodeLine{}
\DoxyCodeLine{    return Application.Exec();}
\DoxyCodeLine{\}}

\end{DoxyCode}
 而如果是我们在开发过程中，则可以使用仓库目录里 toolchain 下的 vmlviewer\+\_\+x64.\+exe 使用如下方法来预览你的 VML： 
\begin{DoxyCode}{0}
\DoxyCodeLine{vmlviewer.exe \$\{vmlfilepath\}}

\end{DoxyCode}
 \hypertarget{md__g___vue_lib_vuilib_cmake_doc_vml_quickstart_autotoc_md1}{}\doxysubsection{第二步：开始使用 VML 构建第一个窗口}\label{md__g___vue_lib_vuilib_cmake_doc_vml_quickstart_autotoc_md1}
你已经了解了基本语法，接下来，开始使用 VML 来构造第一个窗口吧，\+VMain\+Window 的 VMLType 是 mainwindow，并且接受 title 属性设置标题，sizable 属性设置是否拖拽缩放大小，所以我们可以这么写 VML 来构造窗口： 
\begin{DoxyCode}{0}
\DoxyCodeLine{<\textcolor{keywordtype}{vml-\/window} \textcolor{keyword}{type}=\textcolor{stringliteral}{"{}mainwindow"{}} \textcolor{keyword}{title}=\textcolor{stringliteral}{"{}Hello VML!"{}} \textcolor{keyword}{width}=\textcolor{stringliteral}{"{}680"{}} \textcolor{keyword}{height}=\textcolor{stringliteral}{"{}320"{}}>}
\DoxyCodeLine{</\textcolor{keywordtype}{vml-\/window}>}

\end{DoxyCode}
 接下来，使用 vmlviewer.\+exe 打开这个 VML 文件，如果工作正常，那么会出现一个宽为 680，高为 320 的窗口，如果是这样，恭喜你，成功使用 VML 创建了第一个你的窗口！ \hypertarget{md__g___vue_lib_vuilib_cmake_doc_vml_quickstart_autotoc_md2}{}\doxysubsection{第三步：添加文本框控件}\label{md__g___vue_lib_vuilib_cmake_doc_vml_quickstart_autotoc_md2}
既然这个窗口还什么都没有，我们不妨给它加入一个文本框，让它显示 Hello World，\+VText\+Label 的 VMLType 是 textlabel，支持 text 属性输入文本，那么我们就可以这样子定义我们的 Hello World 文本： 
\begin{DoxyCode}{0}
\DoxyCodeLine{<\textcolor{keywordtype}{hello-\/world-\/text} \textcolor{keyword}{type}=\textcolor{stringliteral}{"{}textlabel"{}} \textcolor{keyword}{text}=\textcolor{stringliteral}{"{}Hello World!"{}} \textcolor{keyword}{width}=\textcolor{stringliteral}{"{}80"{}} \textcolor{keyword}{height}=\textcolor{stringliteral}{"{}20"{}}>}
\DoxyCodeLine{</\textcolor{keywordtype}{hello-\/world-\/text}>}

\end{DoxyCode}
 接下来，在使用 vmlviewer\+\_\+x64.\+exe 打开预览这个 VML，您将会在左上角看到一行灰色的 Hello World! 如果无误的话，恭喜你成功使用 VML 做出了一个 Hello World \hypertarget{md__g___vue_lib_vuilib_cmake_doc_vml_quickstart_autotoc_md3}{}\doxysubsection{第四步：使用富属性创建相对位置布局}\label{md__g___vue_lib_vuilib_cmake_doc_vml_quickstart_autotoc_md3}
但是我们发现我们的 Hello World! 在左上角，并不明显，如何让他居中，这里提供一个方法：富属性，在 VML 中，富属性就是为了相对布局而生，其提供了一个非常优雅的方式来让用户可以快速进行布局操作，例如把 Hello World! 文本居中，只需要这么写： 
\begin{DoxyCode}{0}
\DoxyCodeLine{<\textcolor{keywordtype}{hello-\/world-\/text} \textcolor{keyword}{type}=\textcolor{stringliteral}{"{}textlabel"{}} \textcolor{keyword}{text}=\textcolor{stringliteral}{"{}Hello World!"{}} \textcolor{keyword}{width}=\textcolor{stringliteral}{"{}80"{}} \textcolor{keyword}{height}=\textcolor{stringliteral}{"{}20"{}} \textcolor{keyword}{x}=\textcolor{stringliteral}{"{}@center"{}} \textcolor{keyword}{y}=\textcolor{stringliteral}{"{}@center"{}}>}
\DoxyCodeLine{</\textcolor{keywordtype}{hello-\/world-\/text}>}

\end{DoxyCode}
 再次使用 vmlviewer\+\_\+x64.\+exe 预览，就会发现 Hello World! 居中显示，富属性的相对布局，是相对于该节点的父节点而言（窗口无法使用富布局）除此以外，还可以使用例如 @scale @fill 的富属性控制长宽，@relative 控制相对 x、y，@middleoffset 控制中心位移 x、y，这里不多做赘述。 